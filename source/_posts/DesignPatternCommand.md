---
layout: post
title: 设计模式：命令模式
date: 2019-6-4 16:18
category: 设计模式
tags: [设计模式]
description: 命令模式(Command)将一个请求封装为一个对象，从而使我们可用不同的请求对客户进行参数化；对请求排队或者记录请求日志，以及支持可撤销的操作。
---



### [命令模式](https://design-patterns.readthedocs.io/zh_CN/latest/behavioral_patterns/command.html) 

​	**命令模式(Command)将一个请求封装为一个对象，从而使我们可用不同的请求对客户进行参数化；对请求排队或者记录请求日志，以及支持可撤销的操作。**命令模式是一种对象行为型模式，也称动作(Action)模式或事务(Transaction)模式。

[命令模式实现代码](https://github.com/DepInjoy/BaseHouse/blob/master/DesignPattern/%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F/%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81.cpp) 



#### 优点

- 降低系统的耦合度，将请求操作的对象与执行操作的对象分开。
- 允许接收请求的一方决定是否要否决请求。
- 新的命令可以很容易地加入到系统中，而不影响其他的类。
- 可以比较容易地设计一个命令队列和宏命令（组合命令）。
- 可以方便地实现对请求的撤销(Undo)和重做(Redo)。



#### 适用场景

- 系统需要将请求调用者和请求接收者解耦，使得调用者和接收者不直接交互。
- 系统需要在不同的时间指定请求、将请求排队、再执行请求。
- 系统需要支持命令的撤销(Undo)操作和恢复(Redo)操作。
- 系统需要将一组操作组合在一起，即支持宏命令



#### 实际类似场景

- 电视遥控器



#### 模式扩展

##### (一) 宏命令 

​	**宏命令又称为组合命令，它是命令模式和组合模式联用的产物。**它也是一个具体命令，不过它包含了对其他命令对象的引用，在调用方法时，将递归调用它所包含的每个成员命令的相应方法，一个宏命令的成员对象可以是简单命令，还可以继续是宏命令。执行一个宏命令将执行多个具体命令，从而实现对命令的批处理。

[宏命令实现代码](https://github.com/DepInjoy/BaseHouse/blob/master/DesignPattern/%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F/%E5%AE%8F%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0.cpp) 

