---
layout: post
title: 设计模式：享元模式
date: 2019-6-10 18：06
category: 设计模式
tags: [设计模式]
description: 享元设计模式利用共享技术有效地支持大量细颗粒度的对象。
---



### [享元设计模式](https://design-patterns.readthedocs.io/zh_CN/latest/structural_patterns/flyweight.html)

​	享元设计模式利用共享技术实现相同或相似对象的重用，有效地支持大量细颗粒度的对象。**享元模式的核心在于享元工厂类，享元工厂类的作用在于提供一个用于存储享元对象的享元池，用户需要对象时，首先从享元池中获取，如果享元池中不存在，则创建一个新的享元对象返回给用户，并在享元池中保存该新增对象。**享元模式可以做到共享是由于将共享内容分为两部分：

- 内部状态：共享的相同内容

- 外部状态：需要外部环境来设置的不能共享的内容，通过设置不同的外部状态使得相同的对象可以具有一些不同特征。

[享元模式-只考虑共享忽略内外部](<https://github.com/DepInjoy/BaseHouse/blob/master/DesignPattern/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F-%E7%BD%91%E7%AB%99%E5%A4%8D%E7%94%A8(%E5%8F%AA%E8%80%83%E8%99%91%E5%85%B1%E4%BA%AB).cpp>) [享元模式-网站复用：添加用户外部对象](<https://github.com/DepInjoy/BaseHouse/blob/master/DesignPattern/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F-%E7%BD%91%E7%AB%99%E5%A4%8D%E7%94%A8(%E5%86%85%E5%A4%96%E9%83%A8).cpp>) 



#### 优点

- 享元模式的优点在于它可以极大减少内存中对象的数量，使得相同对象或相似对象在内存中只保存一份。



#### 缺点

- 享元模式使得系统更加复杂，需要分离出内部状态和外部状态，这使得程序的逻辑复杂化
- 为了使对象可以共享，享元模式需要将享元对象的状态外部化，而读取外部状态使得运行时间变长。



#### 适用场景

- 一个系统有大量相同或者相似的对象。由于这类对象的大量使用，造成内存的大量耗费。



